# v09 Long-term Optimized μ „λµ κ°λ° κ³„ν

**μ‘μ„±μΌ**: 2025-10-18
**μ „λµλ…**: Long-term Optimized DAY Strategy
**λ²„μ „**: v09
**νƒ€μ„ν”„λ μ„**: DAY (μΌλ΄‰)
**λ©ν‘**: v07μ μ¤λ²„ν”Όν… λ¬Έμ  ν•΄κ²°

---

## π― κ°λ° λ©ν‘

### ν•µμ‹¬ λ¬Έμ 
**v07μ μΉλ…μ  μ¤λ²„ν”Όν…**:
- 2024λ…„: 148.63% (μƒμΉμ¥ μµμ ν™”)
- 2025λ…„: 9.76% (93.44% μ„±λ¥ μ €ν•)
- μ›μΈ: 2024λ…„ λ‹¨μΌ μ—°λ„ λ°μ΄ν„°λ΅ μµμ ν™”

### v09 λ©ν‘
1. **μ¤λ²„ν”Όν… μ™„ν™”**: μ„±λ¥ μ €ν• < 70%
2. **λ²”μ©μ„± ν™•λ³΄**: λ‹¤μ–‘ν• μ‹μ¥ ν™κ²½(μƒμΉ/ν΅λ³΄/ν•λ½)μ—μ„ μ‘λ™
3. **μ•μ •μ  μμµ**: 2024λ…„ 120~140%, 2025λ…„ 30~50%

---

## π“ μ΄μ „ λ²„μ „ λ¶„μ„

### v07 (Enhanced DAY)
**κ°•μ **:
- β… 2024λ…„ μµκ³  μ„±κ³Ό (148.63%, Sharpe 2.27, MDD 20.26%)
- β… MACD κ³¨λ“ ν¬λ΅μ¤ μ¶”κ°€λ΅ μ§„μ… κΈ°ν μ¦κ°€
- β… μ°μν• λ¦¬μ¤ν¬ κ΄€λ¦¬

**μ•½μ **:
- β μ‹¬κ°ν• μ¤λ²„ν”Όν… (93.44% μ„±λ¥ μ €ν•)
- β 2024λ…„ μƒμΉμ¥μ—λ§ μµμ ν™”λ νλΌλ―Έν„°
- β Trailing Stop 10%κ°€ ν΅λ³΄μ¥μ—μ„ λ„λ¬΄ λΉ λ¥Έ μ²­μ‚°

**v07 νλΌλ―Έν„°** (2024λ…„ μµμ ν™”):
```json
{
  "trailing_stop_pct": 0.10,  // μƒμΉμ¥ μµμ 
  "stop_loss_pct": 0.13,
  "macd_fast": 13,            // λ―Όκ°ν•κ² μ΅°μ •
  "macd_slow": 23,
  "macd_signal": 8
}
```

### v08 (Market Adaptive) - μ‹¤ν¨
**μ‹λ„**: μ‹μ¥ λ¶„λ¥(Bull/Sideways/Bear)λ΅ μ¤λ²„ν”Όν… ν•΄κ²°
**κ²°κ³Ό**: 89.27% (2024), 0.97% (2025) - v07λ³΄λ‹¤ μ•…ν™”
**μ‹¤ν¨ μ›μΈ**:
- Golden Cross μ§„μ…μ΄ λ„λ¬΄ λ“λ¬Όκ² λ°μƒ (μ—° 2ν)
- μ‹μ¥ μ „ν™ μ‹ λ¬΄μ΅°κ±΄ μ²­μ‚°ν•μ—¬ μμµ κΈ°ν μƒμ‹¤

### v05 (DAY Optimized) - ν„μ¬ μµκ³ 
**μ„±κ³Ό**: 293.38% (2024), 124.93% (2025)
**νΉμ§•**: λ‹¨μν• EMA μ „λµ, νλΌλ―Έν„° λ―Έμ„Έ μ΅°μ •

---

## π’΅ ν•µμ‹¬ κ°€μ„¤

### κ°€μ„¤
**"v07μ νλΌλ―Έν„°λ¥Ό 2017~2023λ…„ μ¥κΈ° λ°μ΄ν„°λ΅ μ¬μµμ ν™”ν•λ©΄ λ²”μ©μ„± ν™•λ³΄"**

### κ·Όκ±°
1. **2024λ…„λ§ ν•™μµ β†’ μƒμΉμ¥ νΈν–¥**
   - 2024λ…„ Buy&Hold: 137.49% (κ°•ν• μƒμΉμ¥)
   - 2025λ…„ Buy&Hold: 20.15% (ν΅λ³΄μ¥)
   - μ„λ΅ λ‹¤λ¥Έ μ‹μ¥ ν™κ²½

2. **λ‹¤μ–‘ν• μ‹μ¥ ν¬ν•¨ ν•„μ”**
   - 2017~2023λ…„ 7λ…„: μƒμΉ/ν•λ½/ν΅λ³΄ λ¨λ‘ ν¬ν•¨
   - 2018λ…„ λ€ν­λ½, 2021λ…„ μƒμΉμ¥, 2022λ…„ ν•λ½μ¥ λ“±
   - λ²”μ©μ  νλΌλ―Έν„° λ„μ¶ κ°€λ¥

3. **κ²€μ¦λ μ „λµ κµ¬μ΅°**
   - v07μ EMA + MACD μ§„μ…μ€ μ ν¨
   - νλΌλ―Έν„°λ§ μ¬μ΅°μ •ν•λ©΄ κ°μ„  κ°€λ¥

### μμƒ κ²°κ³Ό
**2017~2023λ…„ ν•™μµ β†’ λ” λ³΄μμ μΈ νλΌλ―Έν„°**:
- Trailing Stop: 10% β†’ 15~18% (λ” μ—¬μ  μκ²)
- MACD: λ” ν‘μ¤€μ  κ°’ (12/26/9)
- Stop Loss: μ μ‚¬ν•κ² μ μ§€ (10~13%)

**μ„±κ³Ό μμƒ**:
- 2024λ…„: 120~140% (v07 λ€λΉ„ -8~28%p κ°μ† ν—μ©)
- 2025λ…„: 30~50% (v07 9.76% λ€λΉ„ 3~5λ°° κ°μ„ )
- μ„±λ¥ μ €ν•: 93% β†’ 60~70% (κ°μ„ )

---

## π”§ κµ¬ν„ κ³„ν

### Phase 1: λ°μ΄ν„° μ¤€λΉ„
**ν•™μµ κΈ°κ°„**: 2017-01-01 ~ 2023-12-31 (7λ…„)
**κ²€μ¦ κΈ°κ°„**: 2024-01-01 ~ 2024-12-31 (Out-of-Sample)
**ν…μ¤νΈ κΈ°κ°„**: 2025-01-01 ~ 2025-10-17 (Final Test)

**λ°μ΄ν„° ν™•μΈ**:
```python
# 2017~2023λ…„ DAY λ°μ΄ν„° μ΅΄μ¬ ν™•μΈ
# upbit_bitcoin.dbμ bitcoin_day ν…μ΄λΈ” μ΅°ν
# μμƒ λ μ½”λ“: ~2,190μΌ (7λ…„ Γ— 365μΌ - μ£Όλ§)
```

### Phase 2: v07 μ½”λ“ λ³µμ‚¬ λ° μμ •
**λ³µμ‚¬ λ€μƒ**:
- β… `strategy.py` (v07 λ΅μ§ κ·Έλ€λ΅)
- β… `config.json` (μ΄κΈ°κ°’λ§ μμ •)
- β… `simple_backtester.py` (v07 λ°±ν…μ¤ν„°)

**μμ • μ‚¬ν•­**:
- `config.json`: νλΌλ―Έν„° μ΄κΈ°κ°’μ„ λ” λ³΄μμ μΌλ΅ μ„¤μ •
- `backtest.py`: 2017~2023λ…„ λ°μ΄ν„° λ΅λ“ν•λ„λ΅ λ³€κ²½
- `optimize.py`: μƒλ΅ μ‘μ„± (Optuna μµμ ν™”)

### Phase 3: Optuna μµμ ν™”
**μµμ ν™” λ€μƒ νλΌλ―Έν„°**:
```python
{
  "trailing_stop_pct": suggest_float(0.08, 0.25),  # v07: 0.10
  "stop_loss_pct": suggest_float(0.08, 0.20),      # v07: 0.13
  "macd_fast": suggest_int(10, 15),                # v07: 13
  "macd_slow": suggest_int(20, 30),                # v07: 23
  "macd_signal": suggest_int(7, 11)                # v07: 8
}
```

**λ©μ  ν•¨μ** (Multi-objective):
```python
def objective(trial):
    params = {...}
    results = run_backtest('2017-01-01', '2023-12-31', params)

    # λ‹¤μ¤‘ λ©ν‘ μµμ ν™”
    return_score = results['total_return'] / 150  # λ©ν‘ 150%
    sharpe_score = results['sharpe_ratio'] / 1.5  # λ©ν‘ 1.5
    mdd_penalty = max(0, results['max_drawdown'] - 30) / 10  # MDD > 30% ν¨λ„ν‹°

    # κ°€μ¤‘ ν•©μ‚°
    score = (
        0.5 * return_score +
        0.3 * sharpe_score -
        0.2 * mdd_penalty
    )

    # μ μ•½ μ΅°κ±΄
    if results['total_trades'] < 3:
        return -999  # κ±°λ λ„λ¬΄ μ μ
    if results['sharpe_ratio'] < 0.8:
        return -999  # Sharpe λ„λ¬΄ λ‚®μ

    return score
```

**μ‹¤ν–‰ μ΅°κ±΄**:
- Trials: 300ν (v07: 100ν)
- Sampler: TPE (Bayesian Optimization)
- Pruner: MedianPruner (μ΅°κΈ° μΆ…λ£)
- μμƒ μ‹κ°„: 5~15λ¶„

### Phase 4: 2024λ…„ λ°±ν…μ¤ν… (Out-of-Sample)
**λ©ν‘**:
- μμµλ¥ : 120~140%
- Sharpe: >= 1.2
- MDD: <= 25%
- Buy&Hold (137.49%) μ΄κ³Ό

**ν‰κ°€**:
- β… λ©ν‘ λ‹¬μ„± β†’ Phase 5 μ§„ν–‰
- β οΈ λ¶€λ¶„ λ‹¬μ„± β†’ νλΌλ―Έν„° λ²”μ„ μ΅°μ • ν›„ μ¬μµμ ν™”
- β μ‹¤ν¨ β†’ v05λ΅ λ³µκ·€

### Phase 5: 2025λ…„ ν…μ¤νΈ (Final Test)
**λ©ν‘**:
- μμµλ¥ : 30~50%
- Buy&Hold (20.15%) μ΄κ³Ό
- μ„±λ¥ μ €ν•: < 70%

**ν‰κ°€**:
- β… λ©ν‘ λ‹¬μ„± β†’ v09 μ„±κ³µ, v10 μ§„ν–‰
- β οΈ λ¶€λ¶„ λ‹¬μ„± β†’ v09 κ°μ„  λ²„μ „ μ‹λ„
- β μ‹¤ν¨ β†’ v05λ΅ λ³µκ·€, v09 νκΈ°

### Phase 6: Walk-Forward λ¶„μ„
**λ©μ **: μ—°λ„λ³„ μ„±κ³Ό μΌκ΄€μ„± ν™•μΈ

**λ°©λ²•**:
```
ν•™μµ: 2017~2019 (3λ…„) β†’ ν…μ¤νΈ: 2020λ…„
ν•™μµ: 2018~2020 (3λ…„) β†’ ν…μ¤νΈ: 2021λ…„
ν•™μµ: 2019~2021 (3λ…„) β†’ ν…μ¤νΈ: 2022λ…„
ν•™μµ: 2020~2022 (3λ…„) β†’ ν…μ¤νΈ: 2023λ…„
ν•™μµ: 2021~2023 (3λ…„) β†’ ν…μ¤νΈ: 2024λ…„
ν•™μµ: 2022~2024 (3λ…„) β†’ ν…μ¤νΈ: 2025λ…„
```

**ν‰κ°€ μ§€ν‘**:
- ν‰κ·  μμµλ¥ 
- ν‘μ¤€νΈμ°¨ (λ‚®μ„μλ΅ μΌκ΄€μ„± λ†’μ)
- μµμ•… μ—°λ„ μμµλ¥  (λ°”λ‹¥ ν™•μΈ)

---

## π“… κ°λ° μΌμ •

### Day 1: μ¤€λΉ„ λ° μµμ ν™”
- [x] v07 μ½”λ“ λ³µμ‚¬
- [ ] 2017~2023λ…„ λ°μ΄ν„° ν™•μΈ
- [ ] `optimize.py` μ‘μ„±
- [ ] Optuna μµμ ν™” μ‹¤ν–‰ (300 trials)

### Day 2: κ²€μ¦ λ° λ¶„μ„
- [ ] μµμ  νλΌλ―Έν„° ν™•μΈ
- [ ] 2024λ…„ λ°±ν…μ¤ν…
- [ ] 2025λ…„ ν…μ¤νΈ
- [ ] Walk-Forward λ¶„μ„

### Day 3: λ¬Έμ„ν™” λ° ν‰κ°€
- [ ] `result.md` μ‘μ„±
- [ ] μ„±κ³Ό ν‰κ°€
- [ ] v10 μ μ• λλ” v05 λ³µκ·€ κ²°μ •

---

## π― μ„±κ³µ κΈ°μ¤€

### ν•„μ μ΅°κ±΄ (λ¨λ‘ μ¶©μ΅± ν•„μ”)
- β… 2024λ…„ μμµλ¥  >= 120%
- β… 2025λ…„ μμµλ¥  >= 30%
- β… μ„±λ¥ μ €ν• < 70%
- β… Sharpe Ratio >= 1.2
- β… MDD <= 25%

### μ¶”κ°€ μ΅°κ±΄ (κ¶μ¥)
- β… 2024λ…„ Buy&Hold (137.49%) μ΄κ³Ό
- β… 2025λ…„ Buy&Hold (20.15%) μ΄κ³Ό
- β… Walk-Forward ν‘μ¤€νΈμ°¨ < 30%

---

## π” μμƒ μ„ν— μ”μ†

### μ„ν— 1: μ¥κΈ° λ°μ΄ν„° μµμ ν™” β†’ λ‚®μ€ μμµλ¥ 
**λ¬Έμ **: 7λ…„ λ°μ΄ν„°λ΅ μµμ ν™”ν•λ©΄ λ³΄μμ μΈ νλΌλ―Έν„° β†’ 2024λ…„ μμµ κ°μ†
**λ€μ‘**: λ©ν‘λ¥Ό 120%λ΅ λ‚®μ¶¤ (v07 148% λ€λΉ„ κ°μ† ν—μ©)

### μ„ν— 2: 2017~2023λ…„ λ°μ΄ν„° λ¶€μ΅±
**λ¬Έμ **: upbit_bitcoin.dbμ— 2017λ…„ λ°μ΄ν„°κ°€ μ—†μ„ μ μμ
**λ€μ‘**: μ‹¤μ  μ‚¬μ© κ°€λ¥ κΈ°κ°„μΌλ΅ μ΅°μ • (μ: 2019~2023λ…„)

### μ„ν— 3: μ—¬μ „ν μ¤λ²„ν”Όν…
**λ¬Έμ **: 7λ…„ ν•™μµν•΄λ„ 2025λ…„ μ„±κ³Ό λ―Έν΅
**λ€μ‘**: v05λ΅ λ³µκ·€, λ‹¤λ¥Έ μ ‘κ·Ό μ‹λ„ (v10: μ§„μ… μ΅°κ±΄ μ™„ν™”)

---

## π“ λ‹¤μ λ‹¨κ³„ (v10 μ μ•)

### v09 μ„±κ³µ μ‹
**v10: μ§„μ… μ΅°κ±΄ μ™„ν™”**
- Golden Cross μ κ±°
- λ‹¨μ EMA μ„μΉ + λ¨λ©ν…€ ν™•μΈ
- κ±°λ λΉλ„ μ¦κ°€ (5ν β†’ 15~20ν)
- μμƒ μμµλ¥ : 140~160%

### v09 μ‹¤ν¨ μ‹
**v05λ΅ λ³µκ·€**
- ν„μ¬ μµκ³  μ „λµ (293.38% / 124.93%)
- μ‹¤μ‹κ°„ κ±°λ μ¤€λΉ„
- v09μ κµν› λ°μν•μ—¬ v10 μ¬μ„¤κ³„

---

**μ‘μ„±μ**: Claude
**μ‘μ„±μΌ**: 2025-10-18
**λ‹¤μ μ‘μ—…**: optimize.py μ‘μ„± λ° Optuna μ‹¤ν–‰
