# SHORT_V1: 비트코인 선물 하락장 숏 전략 개발 계획

**작성일**: 2025-12-10
**전략명**: EMA/ADX 추세 추종 기반 비트코인 선물 단독 숏 전략 (Trend-Following Short Strategy)

---

## 1. 전략 개요 및 목표

### 1.1. 핵심 목표

- 비트코인(BTC/USDT Perpetual Futures) 시장의 명확한 하락 추세를 포착하여 숏 포지션 진입
- 기존 현물(Spot) 롱 포지션과 독립적으로 운영되며, 하락장에서만 수익을 창출하여 전체 포트폴리오의 안정성 확보
- 낮은 승률을 높은 **손익비(Risk-Reward Ratio)**로 상쇄하여 장기적인 기대 수익값(Expectancy > 1) 달성

### 1.2. 사용 거래소 및 상품

- **거래소**: 바이낸스 (Binance)
- **상품**: BTC/USDT 무기한 선물 (Perpetual Futures)
- **마진 모드**: 격리 마진 (Isolated Margin) 필수

---

## 2. 전략 상세 정의 (매매 신호)

### 2.1. 시간대 설정

- **기준 차트**: 4시간봉 (4h) 또는 일봉 (1d)

### 2.2. 진입 조건 (Entry Signal: 숏)

다음의 **모든 조건**이 충족될 때 **시장가 (Market Order)**로 숏 포지션 진입을 실행합니다.

#### 추세 방향 확인 (EMA 데드 크로스)
- 단기 지수 이동평균선 (EMA_50)이 장기 지수 이동평균선 (EMA_200)을 **하향 돌파**했을 것

#### 추세 강도 확인 (ADX)
- ADX (Average Directional Index) 값이 **25 이상**일 것 (추세가 강함)
- **-DI** 선이 **+DI** 선 위에 위치할 것 (하락 추세 우위)

#### 캔들 필터 (선택 사항)
- 진입 신호 발생 캔들 또는 그 이전 캔들이 **음봉**일 것

### 2.3. 청산 조건 (Exit Signal)

| 구분 | 조건 | 실행 방식 |
|------|------|-----------|
| **손절매 (Stop-Loss, SL)** | 진입 직전의 스윙 하이(Swing High) 가격에 SL 설정 (최대 손실율 3%~5% 이내로 제한) | 포지션 진입과 동시에 OCO 주문으로 SL 가격 지정 |
| **수익 실현 (Take Profit, TP)** | 위험 대비 보상 비율 (R:R Ratio)을 **1:2.5**로 설정한 가격에 TP 설정 | `TP = 진입가 - ((진입가 - SL) × 2.5)` |
| **추세 반전 (Trailing Stop)** | EMA_50이 EMA_200을 **상향 돌파 (골든 크로스)**했을 때 포지션 강제 종료 | 즉시 시장가 청산 |

---

## 3. 리스크 및 자금 관리 방안 (필수)

### 3.1. 레버리지 및 마진 설정

- **마진 모드**: **격리 마진 (Isolated Margin)**을 사용하여 청산 위험을 해당 포지션 마진으로만 국한
- **레버리지**: 시스템의 초기 검증 단계에서는 **3x 이하**의 저배율을 사용하고, 안정성 확인 후 점진적으로 상향 조정을 고려
- **포지션 규모**: 단일 거래의 최대 손실액은 **총 거래 자금의 1%**를 넘지 않도록 함

**최대 계약 규모 공식**:
```
최대 계약 규모 = (총 자본 × 최대 리스크 비율) / (진입가 - 손절가) × 레버리지
```

### 3.2. 최대 낙폭 (Max Drawdown, MDD) 관리

- 시스템의 백테스트 MDD가 **20%**를 초과할 경우, 레버리지를 낮추거나 지표의 조건을 더욱 까다롭게 조정
- 실시간 운용 중 MDD가 특정 임계값(예: 25%)을 초과할 경우, 자동으로 모든 거래를 일시 정지하는 안전장치를 구현

### 3.3. 펀딩비 (Funding Rate) 관리

- 숏 포지션은 보통 펀딩비를 지불해야 함
- 펀딩비 지불 시점 (바이낸스 기준 8시간마다) 전에 청산될 가능성이 높은 단기 추세만 거래하거나, 펀딩비 지불 직전에 포지션을 종료하는 로직을 고려

---

## 4. 백테스트 및 성과 분석 방법

### 4.1. 데이터 및 기간

- **데이터**: 바이낸스 BTC/USDT Perpetual Futures 4시간봉 또는 일봉 데이터
- **기간**: 최소 3년치 (2022년 하락장 및 2023년 반등장 등 다양한 시장 상황 포함)

### 4.2. 백테스트 시뮬레이션 항목

- **초기 시드 (Initial Capital)**: $10,000 USDT (예시)
- **거래 비용**: Maker/Taker 수수료 (바이낸스 VIP 레벨 기준) 포함
- **슬리피지 (Slippage)**: 시장가 주문 실행 시 발생 가능한 가격 차이를 **0.05%** 등으로 가정하여 적용
- **펀딩비**: 실제 펀딩비 데이터(음수)를 거래 비용으로 정확히 반영

### 4.3. 핵심 성과 지표 (KPIs) 분석

| 지표 (Metric) | 목표 범위 | 의미 |
|---------------|-----------|------|
| 순수익 (Net Profit) | 양수 (Positive) | 총 수익에서 총 손실 및 모든 비용을 제외한 최종 수익 |
| 수익 계수 (Profit Factor) | **1.5 이상** | 총 이익을 총 손실로 나눈 값. 1 초과는 수익성 입증 |
| 기대값 (Expectancy) | **0.2 이상** | 거래당 평균 기대 수익 (위험 대비) |
| 샤프 비율 (Sharpe Ratio) | **1.0 이상** | 리스크 대비 초과 수익률. 클수록 리스크 관리가 잘 된 것 |
| 최대 낙폭 (Max Drawdown, MDD) | **20% 이하** | 포트폴리오의 최대 손실 구간 |
| 평균 손익비 (R:R Ratio) | **1:2 이상** | 승리 거래의 평균 수익과 패배 거래의 평균 손실 비율 |

---

## 5. 개발 단계 (Phase)

| Phase | 내용 | 상세 |
|-------|------|------|
| **Phase 1** | 데이터 수집 및 전처리 | 바이낸스 API를 이용한 BTC/USDT 과거 데이터 (캔들스틱, 펀딩비) 수집 |
| **Phase 2** | 전략 지표 계산 | EMA_50, EMA_200, ADX, -DI, +DI를 계산하는 함수 및 데드 크로스, ADX 조건 확인 로직 작성 |
| **Phase 3** | 백테스트 시뮬레이터 구축 | 숏 진입/청산 로직을 구현하고 SL/TP, 레버리지, 수수료, 슬리피지를 적용하여 트레이딩을 시뮬레이션하는 백테스트 프레임워크 작성 |
| **Phase 4** | 성과 분석 및 최적화 | KPI를 계산하고, 매개변수 (EMA 기간, ADX 임계값)를 변경하여 최대 수익 계수를 달성하는 최적화 방안 제안 |

---

## 6. 폴더 구조 (예정)

```
strategies/
├── SHORT_V1/
│   ├── config.json           # 하이퍼파라미터
│   ├── strategy.py           # 전략 로직
│   ├── backtest.py           # 백테스팅 스크립트
│   ├── data_collector.py     # 바이낸스 데이터 수집
│   ├── indicators.py         # EMA/ADX 지표 계산
│   └── results/              # 백테스트 결과
```

---

## 7. v35 Optimized와의 관계

| 구분 | v35 Optimized | SHORT_V1 |
|------|---------------|----------|
| **방향** | 롱 (매수) | 숏 (매도) |
| **거래소** | 업비트 (현물) | 바이낸스 (선물) |
| **시장 조건** | BULL/SIDEWAYS | BEAR |
| **역할** | 상승장 수익 | 하락장 방어/수익 |
| **운영** | 독립 운영 | 독립 운영 |

**포트폴리오 조합 시나리오**:
- **상승장**: v35 롱 수익 + SHORT_V1 비활성
- **하락장**: v35 손실 + SHORT_V1 숏 수익 (손실 상쇄)
- **횡보장**: v35 소폭 수익 + SHORT_V1 비활성

---

**문서 버전**: v1.0
**상태**: 개발 대기
