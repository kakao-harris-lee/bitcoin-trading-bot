{
  "strategy_name": "v44_supreme_hybrid_scalping",
  "version": "1.0.0",
  "description": "3-Layer Hybrid: v43 Day Master + M60/M240 Scalping + Kelly + Dynamic Exit",
  "created": "2025-10-20",

  "backtest": {
    "initial_capital": 10000000,
    "fee_rate": 0.0005,
    "slippage": 0.0002,
    "train_period": {
      "start": "2020-01-01",
      "end": "2024-12-31"
    },
    "test_period": {
      "start": "2025-01-01",
      "end": "2025-10-20"
    }
  },

  "capital_allocation": {
    "layer1_day": 1.00,
    "layer2_minute60": 0.00,
    "layer2_minute240": 0.00,
    "max_total_leverage": 1.0,
    "comment": "v43 복제 테스트: Layer 1만 100% 사용"
  },

  "layer1_master": {
    "enabled": true,
    "timeframe": "day",
    "min_score": 40,
    "min_tier": "S",
    "position_size_method": "kelly_half",
    "kelly_range": [0.10, 0.50],
    "exit": {
      "take_profit": 0.05,
      "stop_loss": -0.02,
      "max_hold_hours": 72
    }
  },

  "layer2_scalping": {
    "enabled": true,
    "activation_condition": "layer1_active",

    "minute60": {
      "enabled": true,
      "min_score": 30,
      "min_tier": "A",
      "additional_filters": {
        "rsi_max": 50,
        "mfi_min": 45
      },
      "position_size_method": "kelly_half",
      "kelly_range": [0.10, 0.40],
      "exit": {
        "take_profit": 0.025,
        "stop_loss": -0.015,
        "max_hold_hours": 24,
        "trailing_stop": {
          "enabled": true,
          "activation_profit": 0.015,
          "trail_percent": 0.01
        }
      }
    },

    "minute240": {
      "enabled": true,
      "min_score": 25,
      "min_tier": "A",
      "additional_filters": {
        "mfi_min": 50,
        "volume_ratio_min": 1.2
      },
      "position_size_method": "kelly_half",
      "kelly_range": [0.10, 0.40],
      "exit": {
        "take_profit": 0.04,
        "stop_loss": -0.02,
        "max_hold_hours": 48,
        "trailing_stop": {
          "enabled": true,
          "activation_profit": 0.025,
          "trail_percent": 0.015
        }
      }
    }
  },

  "layer3_kelly_criterion": {
    "enabled": true,
    "method": "half_kelly",
    "lookback_trades": 50,
    "min_trades_required": 20,
    "update_frequency": "per_trade",
    "default_size": 0.98,
    "comment": "v43 복제: 98% (수수료 0.07% 고려)"
  },

  "layer4_dynamic_exit": {
    "enabled": true,
    "multi_stage_profit": {
      "enabled": true,
      "stages": [
        {"profit_level": 0.03, "close_ratio": 0.40},
        {"profit_level": 0.05, "close_ratio": 0.30},
        {"profit_level": 0.08, "close_ratio": 0.30}
      ]
    },
    "time_based_exit": {
      "enabled": true,
      "rules": [
        {
          "min_hold_hours": 24,
          "profit_range": [0.0, 0.03],
          "action": "close_all",
          "reason": "opportunity_cost"
        }
      ]
    }
  },

  "risk_management": {
    "max_daily_loss": -0.05,
    "max_consecutive_losses": 3,
    "cooldown_hours": 24,
    "force_exit_loss": -0.10,
    "max_concurrent_positions": 3
  },

  "score_engine": {
    "use_v42_engine": true,
    "config_path": "../v42_ultimate_scalping/config/base_config.json"
  }
}
